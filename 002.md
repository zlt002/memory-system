---
name: Java Agent 开发
---

## Java Agent 开发

### 任务描述
开发 Java Agent，用于监控和收集 Java 应用程序的内存使用情况，包括：
- 内存分配监控
- 对象生命周期跟踪
- 内存泄漏检测
- 性能指标收集

### 具体工作内容

1. **Java Agent 框架搭建**
   - 实现 Agent 入口类
   - 配置 MANIFEST.MF 文件
   - 实现 ClassFileTransformer 接口
   - 设置字节码转换逻辑

2. **内存分配监控**
   - 实现对象分配拦截
   - 记录分配堆栈信息
   - 统计各类对象分配数量
   - 监控大对象分配

3. **对象生命周期跟踪**
   - 实现对象引用跟踪
   - 监控 GC 活动情况
   - 记录对象存活时间
   - 分析内存使用模式

4. **内存泄漏检测**
   - 实现引用链分析
   - 检测可疑内存泄漏
   - 生成内存泄漏报告
   - 提供修复建议

5. **性能指标收集**
   - 收集内存使用统计
   - 监控 GC 性能指标
   - 记录线程活动情况
   - 生成性能报告

### 技术要求
- 使用 Java 17+ 开发
- 使用 ASM 或 ByteBuddy 进行字节码操作
- 支持主流 Java 应用服务器
- 低性能开销设计
- 配置化功能开关

### 交付物
- Java Agent JAR 包
- 配置文件和文档
- 测试用例
- 性能基准测试报告
- 部署和使用文档

### 验收标准
- Agent 能够正常加载和运行
- 内存监控数据准确
- 性能开销在可接受范围内
- 支持主流 Java 应用
- 文档完整且易于理解