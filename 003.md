---
name: Python Agent 开发
---

## Python Agent 开发

### 任务描述
开发 Python Agent，用于监控和收集 Python 应用程序的内存使用情况，包括：
- 内存分配跟踪
- 对象引用分析
- 内存泄漏检测
- 性能数据收集

### 具体工作内容

1. **Python Agent 框架搭建**
   - 实现 Agent 入口模块
   - 设计插件化架构
   - 实现配置管理系统
   - 设置日志和监控机制

2. **内存分配跟踪**
   - 使用 sys.settrace 跟踪对象分配
   - 记录分配堆栈信息
   - 统计各类对象分配情况
   - 监控内存使用趋势

3. **对象引用分析**
   - 实现引用关系分析
   - 检测循环引用
   - 分析内存占用分布
   - 生成对象引用图谱

4. **内存泄漏检测**
   - 实现内存泄漏检测算法
   - 识别异常内存增长
   - 分析泄漏根因
   - 生成泄漏报告

5. **性能数据收集**
   - 收集内存使用统计
   - 监控垃圾回收活动
   - 记录函数执行时间
   - 生成性能分析报告

### 技术要求
- 使用 Python 3.8+ 开发
- 使用 sys.settrace 和 gc 模块
- 支持 CPython 和 PyPy
- 低性能开销设计
- 配置化功能开关

### 交付物
- Python Agent 包
- 配置文件和文档
- 测试用例
- 性能基准测试报告
- 部署和使用文档

### 验收标准
- Agent 能够正常加载和运行
- 内存监控数据准确
- 性能开销在可接受范围内
- 支持主流 Python 框架
- 文档完整且易于理解